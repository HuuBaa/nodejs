<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise</title>
</head>
<body>
<script>
  let checkLogin=function () {
    return new Promise(function (resolve,reject) {
      let flag=document.cookie.indexOf("userId")>-1;
      if(flag=true) {
        resolve({
          status:0,
          result:true
        })
      }else {
        reject("errormsg")
      }
    })
  };

  let getUserInfo=()=>{
    return new Promise((resolve,reject)=>{
      let userInfo={
        userId:"101"
      };
      resolve(userInfo);
    });
  };

let test=()=>{
  return new Promise((resolve,reject)=>{
    resolve("just test")
  })
};

  // checkLogin()
  //   .then(res=>{
  //     if(res.status===0){
  //       console.log(`login success`);
  //       return getUserInfo();
  //     }
  //   })
  //   .then(res=>{
  //     console.log(`userId=${res.userId}`);
  //     return test();
  //   })
  //   .then((res)=>{
  //     console.log(`${res}`);
  //   })
  //   .catch(err=>{
  //     console.log(`error: ${err}`);
  //   });

  Promise.all([checkLogin(),getUserInfo()])
    .then(([res1,res2])=>{
      console.log(`${res1.status}`);
      console.log(`${res2.userId}`);
    })

</script>
</body>
</html>
